---
title: "prelim_results"
author: "Keana Richards"
output:
  html_document:
    chunk_output_type: console
    number_sections: yes
    theme: cerulean
    toc: yes
    toc_depth: 4
    toc_float: yes
  pdf_document:
    toc: yes
    toc_depth: '4'
editor_options: 
  chunk_output_type: console
---


```{r, include = F}


## limiting number of digits to 2 decimal places
options(digits = 2)
options(repos="https://cran.rstudio.com" )
# load packages -----------------------------------------------------------


## Install devtools package if necessary
if(!"devtools" %in% rownames(installed.packages())) install.packages("devtools")


## Package names
packages <- c("readr", "tidyverse", "here", "devtools", "knitr", "officer", "summarytools", "extrafont", "lubridate")

## Install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
  install.packages(packages[!installed_packages])
}

## Packages loading
invisible(lapply(packages, library, character.only = TRUE))


source(here("study3", "source", "01_preregistered-analyses.R"))
source(here("study3", "source", "03_exploratory-analyses.R"))

## Install the stable development versions from GitHub
if(!"papaja" %in% rownames(installed.packages())) devtools::install_github("crsh/papaja")
if(!"emo" %in% rownames(installed.packages())) devtools::install_github("hadley/emo")
library(emo)
library(papaja)


na_drop <- clean %>% drop_na(condition) 
extrafont::loadfonts(device="win")


options(scipen=999)
par(mar = c(2,2,2,2))


```

# Summary: 

* Final sample N = `r nrow(clean)`
* All graphs represent 95% CIs
* Our primary hyp was supported `r emo::ji("smile")`, where gender & condition interacted to affect subjective confidence (aka how confident participants felt about performing well on the upcoming multiplication task). Graph suggests that women have a boost in subjective confidence in preparation condition relative to control, while men's confidence actually *decreases* in preparation condition relative to control. Even though women are still less confident than men in the preparation condition, the gender difference in subjective confidence is smaller in preparation condition relative to control condition.  
* However, when it comes to absolute confidence (aka how many questions participants thought they answered correctly on the multiplication task), the interaction between gender and condition doesn't replicate: we only find evidence of an effect of gender on absolute confidence, where, unsurprisingly based on previous research, women think they will complete significantly fewer problems compared to men (although after correcting for MHT, the effect of gender is only marginally significant *p* = .09). There are a couple of possible reasons that we didn't replicate the interaction effect between gender and condition: 1) the effects of preparation on absolute confidence are qualitatively distinct from the effects of subjective confidence and/or 2) absolute confidence is measured AFTER the main task, so it may be timing that matters. Or possibly a combination of both: e.g., women may try to avoid appearing overconfident in trying to guess how many questions they got right, so they underestimate, *especially* after completing the task already (which means they can't blame the uncertainty of future performance on doing poorly). With subjective confidence, there is no standard by which they can be judged as overconfident, so they don't have to worry as much for being judged as overconfident if they say they *feel* more confident. Also, since subjective confidence is measured before the main task, there is still uncertainty surrounding their future performance, so there is still even less reason to avoid being overconfident, since they can point to uncertainty as an explanation.... but this is just post-hoc theorizing `r emo::ji("sweat_smile")`
* Notably, women have no specific reason for feeling less confident than men overall: there were no gender differences in performance on the main task. 
* At the same time, we don't find evidence that condition actually affected performance, so the fact that women's subjective confidence increased in preparation condition even though they weren't actually performing better is in favor of our idea of opportunity costs: women may prepare more than men, even past the point where preparation boosts performance, just because it makes them feel more confident (even if just in subjective, rather than absolute, terms) about entering a competition/completing a task. Relatedly, we don't find evidence of a gender difference in beliefs about the benefits of preparation among participants in the control condition - again suggesting that women are not especially prone to believe that preparation boosts performance, but may still engage in it more for the benefits on subjective confidence. Or another explanation might be that women just feel like they should prepare more because they are expected to do so based on gender norms, which we have evidence for (i.e., participants, especially women, are significantly more likely to believe that women prepare more than men for most tasks) - however, this gender norms explanation doesn't seem to explain why women see a boost in subjective confidence as shown in the primary hypothesis. 
* We rule out a possible explanation for gender differences in preparation: there do not appear to be any significant gender differences in interest in the task, so it is unlikely that women prepared more in the past because they thought the task was inherently more interesting.  
* When we asked participants to rank the possible explanations for gender differences in preparation, they were most likely to say that “women believe practice will improve performance more than men” and least likely to say that  “women have more free time to devote to practicing than men” - where participants' responses to the free time option is in favor of our opportunity costs idea. 
* Noteworthy confound: there is evidence of a significant difference between time spent on multiplication task (prep condition) vs addition task (control condition). 

# Pre-registered analyses:

```{r}

```


## Primary hypothesis 1: 

*	Model: Linear regression
a)	Predictor(s): Condition, gender, gender*condition
b) Outcome: Subjective confidence

* Evidence of effects of gender,  `r apa_print(primary_hyp1)$full_result$genderWoman`, and gender*condition, `r apa_print(primary_hyp1)$full_result$genderWoman_conditionpract`
* No evidence of effects of condition, `r apa_print(primary_hyp1)$full_result$conditionpract`

```{r f0, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ratings of subjective confidence as a function of gender and condition. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3", "figs","fig00_subj-conf-gender-by-cond.png"))
```

## Exploratory analysis 1: 

*	Model: Linear regression
a)	Predictor(s): Condition, gender, gender*condition
b)	Outcome: Performance on the main multiplication task 

* No evidence of effects of gender,  `r apa_print(exploratory1)$full_result$genderWoman`, condition, `r apa_print(exploratory1)$full_result$conditionpract`, or gender*condition, `r apa_print(exploratory1)$full_result$genderWoman_conditionpract`

```{r f1, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean performance on task as a function of gender and condition. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig01_task_score-gender-by-cond.png"))
```

## Exploratory analysis 2:

*	Model: Linear regression
a)	Predictor(s): Condition, gender, gender*condition
b)	Outcome: Absolute confidence 

* Evidence of effects of gender,  `r apa_print(exploratory2)$full_result$genderWoman` (after adjusting for MHT: *p* = `r p[4]`)
* No evidence of effects of condition, `r apa_print(exploratory2)$full_result$conditionpract` or gender*condition, `r apa_print(exploratory2)$full_result$genderWoman_conditionpract`

```{r f2, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ratings of absolute confidence as a function of gender and condition. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig02_abs-conf-gender-by-cond.png"))
```


## Exploratory analysis 3:

3)	Model: T-test
a)	Predictor(s): Gender
b)	Outcome: Interest in the main multiplication task 


* No evidence of effects of gender on interest, `r apa_print(exploratory3)$full_result`

```{r f3, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ratings of interest in task by gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig03_interest-by-gender.png"))
```

## Exploratory analysis 4:

4) Model: Chi-square goodness of fit test (collapsed across conditions) with perceptions of gender differences in performance on the main multiplication task as variable

* Evidence that there is significant difference in proportion of people across categories, `r apa_print(exploratory4, n = nrow(clean))$statistic` (after adjusting for MHT: *p* `r printp(p[8])`), figure suggests that people were far more likely to choose "No difference" in performance

```{r f4, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Proportion of participants who thought that women performed better, men performed better, or there were no gender differences in performance on the multiplication task, based on their respective gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig04_better-gender-guess.png"))
```

```{r, results = "asis"}
print(ctable(droplevels(gender_filter$gender), gender_filter$better_gender_guess, useNA = "no"))
```


## Exploratory analysis 5:

5) Model: Chi-square goodness of fit test (collapsed across conditions) with perceptions of gender differences in willingness to prepare before completing math tasks as variable

* Evidence that there is significant difference in proportion of people across categories, `r apa_print(exploratory5, n = nrow(clean))$statistic` (after adjusting for MHT: *p* `r printp(p[9])`), figure suggests that women are far more likely to say they prepare for math tasks than men, while men are far more likely to say there is no gender difference in the choice to prepare for math tasks 

```{r f5, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Proportion of participants who thought that women prepare more, men prepare more, or there are no gender differences in preparation before math tasks, based on their respective gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig05_perc-math-gender-pract.png"))
```

```{r, results = "asis"}
print(ctable(droplevels(gender_filter$gender), gender_filter$math_gender_prep, useNA = "no"))
```


## Exploratory analysis 6:

6)	Model: Chi-square goodness of fit test (collapsed across conditions) with perceptions of gender differences in general willingness to prepare as variable

* Evidence that there is significant difference in proportion of people across categories, X<sup>2</sup> (*n* = `r nrow(clean)`) = `r print(exploratory6$observedChi)`, *p* `r printp(p6)` (after adjusting for MHT: *p* `r printp(p[10])`), figure suggests that women are far more likely to say they prepare for most tasks than men, while men are far more likely to say there is no gender difference in the choice to prepare for most tasks 


```{r f6, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Proportion of participants who thought that women prepare more, men prepare more, or there are no gender differences in preparation before most tasks, based on their respective gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig06_perc-gen-gender-pract.png"))
```

```{r, results = "asis"}
print(ctable(droplevels(gender_filter$gender), gender_filter$gen_gender_prep, useNA = "no"))
```


## Exploratory analysis 7:

7)	Model: T-test
a)	Predictor(s): Gender
b)	Outcome: Performance on the main multiplication task 


* No evidence of effects of gender on performance on task, `r apa_print(exploratory7)$full_result`

```{r f7, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean task score based on participant gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig07_task_score-by-gender.png"))
```
## Exploratory analysis 8:

8)	Model: T-test
a)	Predictor(s): Condition
b)	Mediator: Absolute Confidence

* No evidence of effects of condition on absolute confidence, `r apa_print(exploratory8)$full_result`

```{r f8, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean absolute confidence based on condition. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig08_abs-conf-by-condition.png"))
```
## Exploratory analysis 9:

9)	Model: Mediation 
a)	Predictor(s): Condition
b)	Mediator: Subjective Confidence
c)	Outcome: Performance on main multiplication task 

* No evidence of effects of condition on task score,  `r apa_print(exploratory9)$full_result$conditionpract`, so did not run rest of mediation model 

```{r f9, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean task score based on condition. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig09_task-score-by-condition.png"))
```

## Exploratory analysis 10:

10)	Model: T-test
a)	Predictor(s): Condition
b)	Outcome: Time spent on addition/multiplication tasks for preparation/control condition, respectively 

* Evidence of effects of condition on time spent on tasks across conditions, `r apa_print(exploratory10)$full_result` (after adjusting for MHT: *p* = `r printp(p[14])`)

```{r f10, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean time spent on task based on condition. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig10_total-time-by-condition.png"))
```

## Exploratory analysis 11:

11)	Model: T-test
a)	Predictor(s): Gender
Outcome: Beliefs about the effects of preparation on performance
Note: this analysis will only include participants from the control condition  

* No evidence of effects of gender on beliefs about effects of preparation on performance, `r apa_print(exploratory11)$full_result`

```{r f11, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ratings of about the positive effects of preparation on performance based on condition. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig11_control-prep-beliefs-by-gender.png"))
```

## Exploratory analysis 12:

12)	Model: Test of uniformity (collapsed across conditions) with explanations for previously observed gender differences as variable

* Evidence that people differentially selected the responses, X<sup>2</sup> (4, *n* = `r nrow(clean)`) = `r print(chi)`, *p* `r printp(p12)` (after adjusting for MHT: *p* `r printp(p[16])`), where it appears that people were most likely to select the option "women believe practice will improve performance more than men" (*M* = `r de1$mean.rank[1]`) and least likely to select the option "women have more free time to devote to practicing than men" (*M* = `r de1$mean.rank[5]`). There isn't evidence that men and women responded differently to these questions, `r apa_print(sec_exploratory1, n = nrow(clean))$statistic` (note: testing gender diff wasn't in pre-registered analyses, considered secondary exploratory). 

```{r f12, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ranking that 'Women are more likely to think that practicing will improve their performance on the multiplication task compared to men' explains previously observed gender differences as a function of participant gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig12_gender_rank_explanations_2.png"))
```


```{r f13, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ranking that 'Women enjoy practicing for the multiplication problems more than men' explains previously observed gender differences as a function of participant gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig13_gender_rank_explanations_4.png"))
```



```{r f14, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ranking that 'Women are less confident that they will perform well on the multiplication task compared to men' explains previously observed gender differences as a function of participant gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig14_gender_rank_explanations_5.png"))
```


```{r f15, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ranking that 'Women enjoy the process of mastering their multiplication tables more than men' explains previously observed gender differences as a function of participant gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig15_gender_rank_explanations_6.png"))
```


```{r f16, fig.retina=NULL, out.width="1000px",  fig.align="center", fig.cap = "Mean ranking that 'Women have more free time to devote to practicing for the multiplication task than men' explains previously observed gender differences as a function of participant gender. Error bars represent 95 percent confidence intervals."}
knitr::include_graphics(here::here("study3","figs","fig16_gender_rank_explanations_8.png"))
```

# Free-response explanations for gender differences in previous studies: 

When asked what other explanations there might be, here's what participants said: 

```{r}
clean %>% dplyr::select(text_explanation) %>% filter(is.na(text_explanation) == FALSE & text_explanation != "n/a"& text_explanation != "no" &text_explanation != "N/A" & text_explanation != "I cannot think of other reasons" & text_explanation != "I do not have any other explanations" & text_explanation != "none")  %>% knitr::kable()
```


